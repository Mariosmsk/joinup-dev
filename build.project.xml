<?xml version="1.0" encoding="UTF-8" ?>

<project name="Joinup" default="help">

    <includepath classpath="src/Phing" />

    <!-- Import Phing targets related to ContinuousPHP. -->
    <import file="${project.basedir}/build.continuousphp.xml" optional="true" />

    <echo msg="Loading Drush task." />
    <taskdef name="drush" classname="\Phing\Drush\Task" />

    <echo msg="Loading PHPUnit Configuration task." />
    <taskdef name="phpunitconfiguration" classname="\Joinup\Phing\PhpUnitConfigurationTask" />

    <target name="help" description="Phing target list">
        <exec executable="${phing.bin}"
              passthru="true">
            <arg value="-l"/>
        </exec>
    </target>

    <!-- Set up PHPUnit. -->
    <target name="setup-phpunit" description="Generate the configuration file for PHPUnit.">
        <phpunitconfiguration
                configFile="${phpunit.config}"
                distFile="${phpunit.dist}"
                baseUrl="${phpunit.base_url}"
                dbUrl="${phpunit.db_url}"
                sparqlUrl="${phpunit.sparql_url}"
                browsertestOutputDirectory="${phpunit.browsertest_output_dir}"
                browsertestOutputFile="${phpunit.browsertest_output_file}"
                dttBaseUrl="${dtt.base_url}"
                dttApiUrl="${dtt.api_url}"
                dttMinkDriverArgs="${dtt.mink_driver_args}" />

        <!-- Create the directory and file for browsertest output. -->
        <mkdir dir="${phpunit.browsertest_output_dir}" />
        <touch file="${phpunit.browsertest_output_file}" />

    </target>

</project>
